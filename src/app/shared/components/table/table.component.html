<div class="card">
  <div class="table-container">
    <div class="header-table">
      <div class="title-section">
        <h4 class="title">{{ title }}</h4>
        <p class="subtitle">{{ subtitle }}</p>
      </div>
      <button class="button-action" (click)="createOrder()">
        <span class="material-icons">room_service</span>
        New Order
      </button>
      <button class="button-filter">
        <span class="material-icons">sort</span>
        Date & Time
      </button>
    </div>
    <table mat-table [dataSource]="dataSource" class="table-card">
      @for (column of columns; track column) {
        <ng-container
          [matColumnDef]="column.columnDef"
          >
          <th mat-header-cell *matHeaderCellDef class="status-column">{{ column.header }}</th>
          <td mat-cell *matCellDef="let element">
            @if (column.columnDef !== 'status'  && column.columnDef !== 'total') {
              {{ element[column.columnDef] }}
            }
            @if (column.columnDef === 'total') {
              <span>{{ element[column.columnDef] | currency: '' }}</span>
            }
            @if (column.columnDef === 'status') {
              <ng-container class="status-column">
                <mat-select
                  class="custom-outline"
                  [(value)]="element.status"
                  (selectionChange)="updateStatus(element, $event.value)"
                  [ngClass]="getStatusClass(element.status)"
                  >
                  @for (status of statusList; track status) {
                    <mat-option
                      [value]="status.value"
                      >
                      {{ status.name }}
                    </mat-option>
                  }
                </mat-select>
              </ng-container>
            }
          </td>
        </ng-container>
      }

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
</div>
